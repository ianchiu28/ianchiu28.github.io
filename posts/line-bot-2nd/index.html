<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="dark"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>架設一個 LineBot 聊天機器人 (下篇) &middot; Ian&#39;s blog</title>
  <meta name="title" content="架設一個 LineBot 聊天機器人 (下篇) &middot; Ian&#39;s blog" />
  
  
  <meta name="keywords" content="line-bot, node.js, heroku, " />
  
  
  <link rel="canonical" href="https://ianchiu28.github.io/posts/line-bot-2nd/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.5534ca14bd9c95786e0a70108bda44fafe55eb0f8e3025f34e4562ee549a8f010eb155b83bb4834945694ee0c82a5b20154000d3e286119b6bb22b67492fa437.css"/>
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"></script>
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.0f6cdcba463d47a30b4d1d5c867d3734efe55157c813d07a9464f590fb87f004292d44ede3bf88f4920863b987e7fa0e808abd641fd3243efe796d6847d7ccdf.js"
    data-copy="Copy" data-copied="Copied"></script>
  
  
  
  <script src="/lib/zoom/zoom.min.3530c2657381259433194af312ec3d322a97a2ad85661810299757fe793b24c3b8e07ab97fa8e5cf96cff1208f271e75394b6eaa56c2e39e7e2c3ca49fb1921c.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="https://ianchiu28.github.io/posts/line-bot-2nd/">
  <meta property="og:site_name" content="Ian&#39;s blog">
  <meta property="og:title" content="架設一個 LineBot 聊天機器人 (下篇)">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-06-13T12:54:03+08:00">
    <meta property="article:modified_time" content="2018-06-13T12:54:03+08:00">
    <meta property="article:tag" content="Line-Bot">
    <meta property="article:tag" content="Node.js">
    <meta property="article:tag" content="Heroku">
    <meta property="og:image" content="https://ianchiu28.github.io/posts/line-bot-2nd/line-bot-2nd-cover.png">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://ianchiu28.github.io/posts/line-bot-2nd/line-bot-2nd-cover.png">
  <meta name="twitter:title" content="架設一個 LineBot 聊天機器人 (下篇)">

    
  
  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "架設一個 LineBot 聊天機器人 (下篇)",
    "headline": "架設一個 LineBot 聊天機器人 (下篇)",
    
    
    "inLanguage": "en",
    "url" : "https:\/\/ianchiu28.github.io\/posts\/line-bot-2nd\/",
    "author" : {
      "@type": "Person",
      "name": "Ian Chiu"
    },
    "copyrightYear": "2018",
    "dateCreated": "2018-06-13T12:54:03\u002b08:00",
    "datePublished": "2018-06-13T12:54:03\u002b08:00",
    
    "dateModified": "2018-06-13T12:54:03\u002b08:00",
    
    "keywords": ["line-bot","node.js","heroku"],
    
    "mainEntityOfPage": "true",
    "wordCount": "831"
  }]
  </script>


  
  
  <meta name="author" content="Ian Chiu" />
  
  
  
  
  
  
  
  
  <link href="https://ianchiu28.github.io" rel="me" />
  
  
  
  
  <link href="https://github.com/ianchiu28" rel="me" />
  
  
  
  
  <link href="https://linkedin.com/in/ianchiu28" rel="me" />
  
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.03cb160e3cfdb2667a2e2c80d283bebcf63ff8bbc4b629c9ab2babf6fae1d0c07ad470edae783efa4fabda2ac01c58d60e63b98b3c336be8208460f08f4354f5.js"></script>






















  
  



  
  
  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Ian&rsquo;s blog</a>
            

        </nav>
        <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">

            
            
            
  <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Posts">
        Blog
    </p>
</a>



            
            
  <a href="/categories/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Categories">
        Categories
    </p>
</a>



            
            
  <a href="/tags/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Tags">
        Tags
    </p>
</a>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class=" flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 md:hidden">

        <label id="menu-button" class="block">
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li id="menu-close-button">
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Posts">
            Blog
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/categories/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Categories">
            Categories
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/tags/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Tags">
            Tags
        </p>
    </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  
        
            <div class="w-full h-36 md:h-56 lg:h-72 single_hero_basic nozoom" style="background-image:url(/posts/line-bot-2nd/line-bot-2nd-cover_hu_49f42a2558ac056e.png);"></div>
        
    
  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      架設一個 LineBot 聊天機器人 (下篇)
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  













<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2018-06-13T12:54:03&#43;08:00">2018 June 13</time><span class="px-2 text-primary-500">&middot;</span><span>831 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">4 mins</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/categories/tech/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Tech
  </span>
</span>
  </span>
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/line-bot/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Line-Bot
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/node.js/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Node.js
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/heroku/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Heroku
  </span>
</span>
  </span>
  
  
  
  
</div>







    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Ian Chiu
    </div>
    
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:ian.yenchia.chiu@gmail.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://ianchiu28.github.io"
          target="_blank"
          aria-label="Link"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/ianchiu28"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://linkedin.com/in/ianchiu28"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10">

         <details open id="TOCView" class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#事前準備">事前準備</a></li>
    <li><a href="#架設一台-heroku-伺服器">架設一台 Heroku 伺服器</a>
      <ul>
        <li><a href="#什麼是-heroku-">什麼是 Heroku ?</a></li>
        <li><a href="#註冊">註冊</a></li>
        <li><a href="#開啟一台伺服器">開啟一台伺服器</a></li>
        <li><a href="#寫一個基本-nodejs-程式">寫一個基本 Node.js 程式</a></li>
        <li><a href="#把程式放到伺服器上">把程式放到伺服器上</a></li>
      </ul>
    </li>
    <li><a href="#撰寫-linebot-程式">撰寫 LineBot 程式</a>
      <ul>
        <li><a href="#安裝-linebot-module">安裝 LineBot module</a></li>
        <li><a href="#在-express-建立-webhook-程式檔案">在 Express 建立 Webhook 程式檔案</a></li>
        <li><a href="#撰寫-linebot-邏輯">撰寫 LineBot 邏輯</a></li>
        <li><a href="#在本地端測試-linebot">在本地端測試 LineBot</a>
          <ul>
            <li><a href="#註冊和下載-ngrok">註冊和下載 ngrok</a></li>
            <li><a href="#連結帳號">連結帳號</a></li>
            <li><a href="#使用-ngrok-建立本地端-https-伺服器">使用 ngrok 建立本地端 HTTPS 伺服器</a></li>
            <li><a href="#跟-line-串接在一起測試">跟 Line 串接在一起測試</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#跟讓-heroku-伺服器與-line-串接在一起">跟讓 Heroku 伺服器與 Line 串接在一起</a>
      <ul>
        <li><a href="#部屬程式到-heroku-上面">部屬程式到 Heroku 上面</a></li>
        <li><a href="#修改-line-後台-webhook-url">修改 Line 後台 Webhook URL</a></li>
      </ul>
    </li>
    <li><a href="#再次修改程式邏輯">再次修改程式邏輯</a></li>
    <li><a href="#一些小提醒">一些小提醒</a></li>
    <li><a href="#結語">結語</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#事前準備">事前準備</a></li>
    <li><a href="#架設一台-heroku-伺服器">架設一台 Heroku 伺服器</a>
      <ul>
        <li><a href="#什麼是-heroku-">什麼是 Heroku ?</a></li>
        <li><a href="#註冊">註冊</a></li>
        <li><a href="#開啟一台伺服器">開啟一台伺服器</a></li>
        <li><a href="#寫一個基本-nodejs-程式">寫一個基本 Node.js 程式</a></li>
        <li><a href="#把程式放到伺服器上">把程式放到伺服器上</a></li>
      </ul>
    </li>
    <li><a href="#撰寫-linebot-程式">撰寫 LineBot 程式</a>
      <ul>
        <li><a href="#安裝-linebot-module">安裝 LineBot module</a></li>
        <li><a href="#在-express-建立-webhook-程式檔案">在 Express 建立 Webhook 程式檔案</a></li>
        <li><a href="#撰寫-linebot-邏輯">撰寫 LineBot 邏輯</a></li>
        <li><a href="#在本地端測試-linebot">在本地端測試 LineBot</a>
          <ul>
            <li><a href="#註冊和下載-ngrok">註冊和下載 ngrok</a></li>
            <li><a href="#連結帳號">連結帳號</a></li>
            <li><a href="#使用-ngrok-建立本地端-https-伺服器">使用 ngrok 建立本地端 HTTPS 伺服器</a></li>
            <li><a href="#跟-line-串接在一起測試">跟 Line 串接在一起測試</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#跟讓-heroku-伺服器與-line-串接在一起">跟讓 Heroku 伺服器與 Line 串接在一起</a>
      <ul>
        <li><a href="#部屬程式到-heroku-上面">部屬程式到 Heroku 上面</a></li>
        <li><a href="#修改-line-後台-webhook-url">修改 Line 後台 Webhook URL</a></li>
      </ul>
    </li>
    <li><a href="#再次修改程式邏輯">再次修改程式邏輯</a></li>
    <li><a href="#一些小提醒">一些小提醒</a></li>
    <li><a href="#結語">結語</a></li>
  </ul>
</nav>
  </div>
</details>

<script>

</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <hr>

<h2 class="relative group">前言 
    <div id="前言" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%89%8d%e8%a8%80" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>此篇將會介紹如何使用 Heroku 架設一台伺服器，作為 LineBot 的 webhook server。使用的語言是 Node.js，只需要在程式內撰寫你的邏輯，便可以讓你的 LineBot 更有智慧的和你聊天唷！</p>
<p>開始吧！</p>
<hr>

<h2 class="relative group">事前準備 
    <div id="事前準備" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%ba%8b%e5%89%8d%e6%ba%96%e5%82%99" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>此篇文章會需要用到 Node.js 和 Git，請務必先下載和安裝好哦～</p>
<p>Node.js: <a href="https://nodejs.org/en/" target="_blank">https://nodejs.org/en/</a>
Git: <a href="https://git-scm.com/downloads" target="_blank">https://git-scm.com/downloads</a></p>
<hr>

<h2 class="relative group">架設一台 Heroku 伺服器 
    <div id="架設一台-heroku-伺服器" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e6%9e%b6%e8%a8%ad%e4%b8%80%e5%8f%b0-heroku-%e4%bc%ba%e6%9c%8d%e5%99%a8" aria-label="Anchor">#</a>
    </span>        
    
</h2>

<h3 class="relative group">什麼是 Heroku ? 
    <div id="什麼是-heroku-" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%bb%80%e9%ba%bc%e6%98%af-heroku-" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="heroku"
    srcset="
      /posts/line-bot-2nd/heroku_hu_3cf65aa14d6fb664.png 330w,
      /posts/line-bot-2nd/heroku_hu_852de20aa70e65a6.png 660w,
      /posts/line-bot-2nd/heroku_hu_9c518ed5c10b872a.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/heroku.png"
    src="/posts/line-bot-2nd/heroku.png"
  />

  
</figure>
</p>
<blockquote>
<p>URL: <a href="https://www.heroku.com/" target="_blank">https://www.heroku.com/</a></p></blockquote>
<p>Heroku 是一個租用伺服器的雲端服務，我們可以租用伺服器來執行我們撰寫的程式。他就像是 AWS、Azure、GCP 等等的雲端服務大廠，而 Heroku 有提供我們一些免費配額讓我們租用一些小伺服器，雖然這些小伺服器會受到一些限制，但是要用來玩玩看 LineBot 已經很足夠了哦！</p>
<p>關於 Heroku 的免費配額請參考他們的官方網站：https://devcenter.heroku.com/articles/free-dyno-hours</p>

<h3 class="relative group">註冊 
    <div id="註冊" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e8%a8%bb%e5%86%8a" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>註冊我想應該就不用多做說明了，就到 Heroku 的網頁上註冊吧～</p>

<h3 class="relative group">開啟一台伺服器 
    <div id="開啟一台伺服器" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e9%96%8b%e5%95%9f%e4%b8%80%e5%8f%b0%e4%bc%ba%e6%9c%8d%e5%99%a8" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>首先我們先登入 Heroku！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="heroku-homepage"
    srcset="
      /posts/line-bot-2nd/heroku-homepage_hu_499ec53d0c673f97.png 330w,
      /posts/line-bot-2nd/heroku-homepage_hu_cbf36c9ab17150fa.png 660w,
      /posts/line-bot-2nd/heroku-homepage_hu_493a95c04eaa2d2b.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/heroku-homepage.png"
    src="/posts/line-bot-2nd/heroku-homepage.png"
  />

  
</figure>
</p>
<p>接著我們點選右上角的 New → Create new app 來開啟一台伺服器。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="create-new-app-menu"
    srcset="
      /posts/line-bot-2nd/create-new-app-menu_hu_de89f9437a3df535.png 330w,
      /posts/line-bot-2nd/create-new-app-menu_hu_a0000749778bb0a9.png 660w,
      /posts/line-bot-2nd/create-new-app-menu_hu_1833b5b1c798ceb7.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/create-new-app-menu.png"
    src="/posts/line-bot-2nd/create-new-app-menu.png"
  />

  
</figure>
</p>
<p>填入這台伺服器的資料，區域的話隨便吧，速度應該不會差太多～</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="create-new-app-form"
    srcset="
      /posts/line-bot-2nd/create-new-app-form_hu_4335ce9bd5578aae.png 330w,
      /posts/line-bot-2nd/create-new-app-form_hu_c75224950899d014.png 660w,
      /posts/line-bot-2nd/create-new-app-form_hu_766746ed6953eab3.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/create-new-app-form.png"
    src="/posts/line-bot-2nd/create-new-app-form.png"
  />

  
</figure>
</p>
<p>這樣就開啟一台伺服器囉！是不是超級簡單啊～</p>
<p>不過，現在只是有一台伺服器擺在那裡，但我們不知道他是不是活的好好的。</p>
<p>所以我們要寫一個非常簡單的程式，讓我們可以知道這台伺服器運行的好好的哦～</p>

<h3 class="relative group">寫一個基本 Node.js 程式 
    <div id="寫一個基本-nodejs-程式" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%af%ab%e4%b8%80%e5%80%8b%e5%9f%ba%e6%9c%ac-nodejs-%e7%a8%8b%e5%bc%8f" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>在一個你喜歡的地方開一個資料夾，名字取你喜歡的就好了，這個資料夾就是拿來放我們的伺服器程式的地方哦！我在這邊取名為 LineBotBlueStar。</p>
<p>然後使用 cmd(註1) 進到你的資料夾(註2)吧，我們來做 Node.js 的初始化。</p>
<blockquote>
<p>註1 cmd = windows 的命令提示字元。
註2 假設 LineBotBlueStar 資料夾放在 D 槽底下的 GitHub 資料夾 內，你可以這樣下指令。</p>
<pre tabindex="0"><code>&gt; D:
&gt; cd GitHub\LineBotBlueStar
</code></pre></blockquote>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="go-to-project-folder"
    srcset="
      /posts/line-bot-2nd/go-to-project-folder_hu_6aeb04f0bf7c0ff5.png 330w,
      /posts/line-bot-2nd/go-to-project-folder_hu_26d44bd9179fb023.png 660w,
      /posts/line-bot-2nd/go-to-project-folder_hu_729d0ef099e11537.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/go-to-project-folder.png"
    src="/posts/line-bot-2nd/go-to-project-folder.png"
  />

  
</figure>
</p>
<p>接著，下指令 <code>npm init -y</code>(註3)。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="npm-init"
    srcset="
      /posts/line-bot-2nd/npm-init_hu_7604d5cbd404fd29.png 330w,
      /posts/line-bot-2nd/npm-init_hu_e891f76ddc7bbf4f.png 660w,
      /posts/line-bot-2nd/npm-init_hu_7ba92e454f88c04.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/npm-init.png"
    src="/posts/line-bot-2nd/npm-init.png"
  />

  
</figure>
</p>
<blockquote>
<p>註3 -y 只是因為我懶得輸入一些資訊，想輸入專案資訊的話，可以下 npm init 就可以了哦。</p></blockquote>
<p>再來，為了簡化過程，我們使用 Node.js 中的 Express，幫助我們建立伺服器的資料架構。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> npm i -g express-generator
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> express --view<span class="o">=</span>pug
</span></span><span class="line"><span class="cl"><span class="go">// 接著它會問問題，請輸入y。
</span></span></span><span class="line"><span class="cl"><span class="go">destination is not empty, continue? [y/N] y
</span></span></span></code></pre></div><p>到這邊為止，你可以看到你的 LineBot 資料夾已經多了文件夾和檔案囉，這麼多檔案代表什麼意思呢？還不用緊張，後面會再慢慢提到，我們先讓伺服器動起來吧！</p>
<p>最後，再下一個指令，幫該安裝的 module 全部裝起來！這個指令可能會跑一小段時間哦～</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> npm install
</span></span></code></pre></div><p>現在我們先在我們的電腦上測試一下伺服器是不是都好了，下指令讓程式跑起來！</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> npm start
</span></span><span class="line"><span class="cl"><span class="go">// 此時你的 cmd 會沒辦法再輸入任何指令，這是正確的哦！
</span></span></span></code></pre></div><p>再來開你的瀏覽器，輸入網址 http://localhost:3000，如果有看到 Express 的畫面，就代表我們成功囉！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="express-homepage"
    srcset="
      /posts/line-bot-2nd/express-homepage_hu_c9b2e65bf52ca780.png 330w,
      /posts/line-bot-2nd/express-homepage_hu_9f5ee99d292124f7.png 660w,
      /posts/line-bot-2nd/express-homepage_hu_9a2be9bcf9f18011.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/express-homepage.png"
    src="/posts/line-bot-2nd/express-homepage.png"
  />

  
</figure>
</p>
<p>如果想停掉程式，回到 cmd 上按下 Ctrl + C，就可以停掉程式囉！</p>

<h3 class="relative group">把程式放到伺服器上 
    <div id="把程式放到伺服器上" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e6%8a%8a%e7%a8%8b%e5%bc%8f%e6%94%be%e5%88%b0%e4%bc%ba%e6%9c%8d%e5%99%a8%e4%b8%8a" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>現在我們有伺服器、有程式，接著就是讓他們合體！好啦，其實是把程式上傳到伺服器，讓他執行起來。</p>
<p>怎麼做呢？其實方法有很多，Heroku 的網站也都有教，請看到你的專案的 deploy 頁面</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="heroku-deploy"
    srcset="
      /posts/line-bot-2nd/heroku-deploy_hu_12f27268d8ff533c.png 330w,
      /posts/line-bot-2nd/heroku-deploy_hu_dcfe97a710978e3e.png 660w,
      /posts/line-bot-2nd/heroku-deploy_hu_6f870f7f9873b7cd.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/heroku-deploy.png"
    src="/posts/line-bot-2nd/heroku-deploy.png"
  />

  
</figure>
</p>
<p>deployment method 列出了上傳的一些方法，可以自己選擇一種來用～</p>
<p>筆者在此篇文章選用第一種 Deploy using Heroku Git</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="deploy-heroku-git"
    srcset="
      /posts/line-bot-2nd/deploy-heroku-git_hu_88828369de73f103.png 330w,
      /posts/line-bot-2nd/deploy-heroku-git_hu_a78f862d0773770e.png 660w,
      /posts/line-bot-2nd/deploy-heroku-git_hu_e57b56de4645630f.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/deploy-heroku-git.png"
    src="/posts/line-bot-2nd/deploy-heroku-git.png"
  />

  
</figure>
</p>
<p>我們就按照網頁寫的步驟來做吧！第一步先下載並安裝 Heroku CLI</p>
<p>安裝好後，然後輸入指令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> Heroku login
</span></span></code></pre></div><blockquote>
<p>如果你剛安裝完 Heroku CLI，馬上就下指令，可能會遇到 Heroku 指令不能辨識的問題。處理方式也很簡單，關掉 cmd 重新開一個就可以囉！記得要下指令回到 LineBot 資料夾哦！</p></blockquote>
<p>接著，我們繼續按照網頁下指令，先進到你的 LineBot 資料夾，再下指令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> git init
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> heroku git:remote -a linebot-bluestar // 記得要換成你的 LineBot 名字
</span></span><span class="line"><span class="cl"><span class="go">// 完成後你會看到 &#34;set git remote heroku to https://git.heroku.com/linebot-bluestar.git&#34; 的文字哦！
</span></span></span></code></pre></div><p>再來，部屬我們的程式上伺服器吧！</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> git add . <span class="o">(</span>這個指令會一段時間<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> git commit -am <span class="s2">&#34;make it better&#34;</span>
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> git push heroku master
</span></span></code></pre></div><p>完成！趕緊來看一下伺服器是不是成功了！</p>
<p>在 Heroku 網頁上的右上角，有一個 Open app 的按鈕，按下去看看是不是也可以看到 Express 呢？如果有，那你成功囉！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="heroku-topbar"
    srcset="
      /posts/line-bot-2nd/heroku-topbar_hu_f68caab8cb63e1c5.png 330w,
      /posts/line-bot-2nd/heroku-topbar_hu_d6b13afc617511b7.png 660w,
      /posts/line-bot-2nd/heroku-topbar_hu_60cc6d9022767aa6.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/heroku-topbar.png"
    src="/posts/line-bot-2nd/heroku-topbar.png"
  />

  
</figure>
</p>
<p>到這邊為止，你已經成功搭建一台伺服器，並在上面執行了 Node.js 程式了！</p>
<hr>

<h2 class="relative group">撰寫 LineBot 程式 
    <div id="撰寫-linebot-程式" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e6%92%b0%e5%af%ab-linebot-%e7%a8%8b%e5%bc%8f" aria-label="Anchor">#</a>
    </span>        
    
</h2>

<h3 class="relative group">安裝 LineBot module 
    <div id="安裝-linebot-module" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%ae%89%e8%a3%9d-linebot-module" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>首先我們會使用到 Node.js 中的 linebot 這個 module，先來下載它吧！</p>
<p>一樣到你的 LineBot 資料夾內下指令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> npm i -S linebot
</span></span></code></pre></div>
<h3 class="relative group">在 Express 建立 Webhook 程式檔案 
    <div id="在-express-建立-webhook-程式檔案" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%9c%a8-express-%e5%bb%ba%e7%ab%8b-webhook-%e7%a8%8b%e5%bc%8f%e6%aa%94%e6%a1%88" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>還記得我們使用了 Express 來幫助我們建立這個專案的檔案結構嗎？這邊簡單介紹一下～</p>
<p>當我們運行這隻程式的時候，會率先執行 app.js 這隻檔案，接著在看 app.js 裡面是怎麼寫的，再來決定去執行哪些檔案哦！</p>
<p>我們要做的是在 routes 這個資料夾內建立一個 webhook.js，並設定 app.js 去串接這支 webhook.js。</p>
<p>如此一來，我們就可以在 webhook.js 裡面寫所有 LineBot 的邏輯了！</p>
<p>那就開始吧！進到 routes 新增一支檔案取名為 webhook.js。然後打開 webhook.js，寫入以下程式碼：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;webhook.js is working&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span></code></pre></div><p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="webhook-simple-code"
    srcset="
      /posts/line-bot-2nd/webhook-simple-code_hu_9f3c5e94d5a6abbe.png 330w,
      /posts/line-bot-2nd/webhook-simple-code_hu_f004835db427f6b6.png 660w,
      /posts/line-bot-2nd/webhook-simple-code_hu_a40114bea1426734.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/webhook-simple-code.png"
    src="/posts/line-bot-2nd/webhook-simple-code.png"
  />

  
</figure>
</p>
<p>再來打開 app.js，我們要寫入以下程式碼，讓他可以串接這支 webhook.js：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">webhookRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./routes/webhook&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">&#39;/webhook&#39;</span><span class="p">,</span> <span class="nx">webhookRouter</span><span class="p">);</span>
</span></span></code></pre></div><p>這兩行要寫在哪裡呢，找跟他們長很像的地方寫上去吧，就像下圖紅框處的位置</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="app-include-code"
    srcset="
      /posts/line-bot-2nd/app-include-code_hu_722c530e29c474f2.png 330w,
      /posts/line-bot-2nd/app-include-code_hu_f5f829664db1018.png 660w,
      /posts/line-bot-2nd/app-include-code_hu_b29705ba34e3ffc.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/app-include-code.png"
    src="/posts/line-bot-2nd/app-include-code.png"
  />

  
</figure>
</p>
<p>到這邊我們先測試一下是否成功，下指令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> npm start
</span></span><span class="line"><span class="cl"><span class="go">// 如果有看到 &#34;webhook.js is working&#34; 就成功囉！
</span></span></span></code></pre></div><p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="npm-start"
    srcset="
      /posts/line-bot-2nd/npm-start_hu_f4bc9dbe581ae21b.png 330w,
      /posts/line-bot-2nd/npm-start_hu_53525b5b0f252766.png 660w,
      /posts/line-bot-2nd/npm-start_hu_7786154765408abb.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/npm-start.png"
    src="/posts/line-bot-2nd/npm-start.png"
  />

  
</figure>
</p>

<h3 class="relative group">撰寫 LineBot 邏輯 
    <div id="撰寫-linebot-邏輯" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e6%92%b0%e5%af%ab-linebot-%e9%82%8f%e8%bc%af" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>這階段我們終於要來寫 LineBot 的邏輯啦！</p>
<p>首先我們要先移除掉 app.js 中解析 JSON 的程式碼，不然 LineBot 丟過來的訊息就會先被解析過，這樣我們的程式就沒辦法運作了。</p>
<p>要移除的程式碼只有一行，就是 <code>app.use(express.json());</code>。</p>
<p>我們可以很簡單的把這行刪除掉，或是把它註解掉，如下圖。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="remove-json-parser"
    srcset="
      /posts/line-bot-2nd/remove-json-parser_hu_e3764e347c2d1dae.png 330w,
      /posts/line-bot-2nd/remove-json-parser_hu_fecfe609ec074529.png 660w,
      /posts/line-bot-2nd/remove-json-parser_hu_61f62999ed95689.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/remove-json-parser.png"
    src="/posts/line-bot-2nd/remove-json-parser.png"
  />

  
</figure>
</p>
<p>再來我希望 LineBot 能回應我打給它的字，所以把 webhook.js 改成這樣：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;webhook.js is working&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// linebot module
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">linebot</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;linebot&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// linebot information
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">bot</span> <span class="o">=</span> <span class="nx">linebot</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">channelId</span><span class="o">:</span> <span class="s1">&#39;YOUR_CHANNEL_ID&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">channelSecret</span><span class="o">:</span> <span class="s1">&#39;YOUR_CHANNEL_SECRET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">channelAccessToken</span><span class="o">:</span> <span class="s1">&#39;YOUR_CHANNEL_ACCESS_TOKEN&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// linebot message event
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">bot</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">userInput</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">botReply</span> <span class="o">=</span> <span class="s1">&#39;你剛剛說了: &#39;</span> <span class="o">+</span> <span class="nx">userInput</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// reply to user
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">event</span><span class="p">.</span><span class="nx">reply</span><span class="p">(</span><span class="nx">botReply</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// if reply success
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Reply: &#39;</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// if something went wrong
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error: &#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">linebotParser</span> <span class="o">=</span> <span class="nx">bot</span><span class="p">.</span><span class="nx">parser</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">linebotParser</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</span></span></code></pre></div><p>這邊會看到 linebot information 那邊要輸入 3 組類似代碼的東西，我們可以透過 Line Developers 後台取得 (<a href="https://developers.line.me/console/" target="_blank">https://developers.line.me/console/</a>)。</p>
<p>到 Line 的後台網頁搜尋吧！</p>
<p>我們可以在 Basic information 中找到 Channel ID 和 Channel secret。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="channel-id-secret"
    srcset="
      /posts/line-bot-2nd/channel-id-secret_hu_a0e376d87a8a9aae.png 330w,
      /posts/line-bot-2nd/channel-id-secret_hu_cb6a1518be2263a6.png 660w,
      /posts/line-bot-2nd/channel-id-secret_hu_5a1a9b7bf8b68d74.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/channel-id-secret.png"
    src="/posts/line-bot-2nd/channel-id-secret.png"
  />

  
</figure>
</p>
<p>接著在 Messaging settings 中找到 Channel access token。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="channel-access-token"
    srcset="
      /posts/line-bot-2nd/channel-access-token_hu_e6203d462a12d8c0.png 330w,
      /posts/line-bot-2nd/channel-access-token_hu_27ec44317d779fac.png 660w,
      /posts/line-bot-2nd/channel-access-token_hu_6f68535f5389c6d5.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/channel-access-token.png"
    src="/posts/line-bot-2nd/channel-access-token.png"
  />

  
</figure>
</p>
<p>比較特別的是 Channel access token 一開始是空白的，要按右方的 issue 來產生一組新的 token 哦！</p>
<p>由於我們是第一次產生，token 要多久過期的問題設定 0 小時就可以了。</p>
<p>把三組代碼都填入程式碼內，就完成最簡單的邏輯囉！</p>

<h3 class="relative group">在本地端測試 LineBot 
    <div id="在本地端測試-linebot" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%9c%a8%e6%9c%ac%e5%9c%b0%e7%ab%af%e6%b8%ac%e8%a9%a6-linebot" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>這時候我們會心想：「剛剛把程式都寫好了，要趕緊來測試一下了，我們趕快把程式跟 LineBot 串接在一起吧！」</p>
<p>這時看到 LineBot 的串接的地方如何設定，會發現 LineBot 的串接需要有 HTTPS 的網址，而我們本地端的電腦正常來說不會有一個 HTTPS 的網址啊！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="webhook-url"
    srcset="
      /posts/line-bot-2nd/webhook-url_hu_8726920be6c44e72.png 330w,
      /posts/line-bot-2nd/webhook-url_hu_1291f8ce4fb20c7b.png 660w,
      /posts/line-bot-2nd/webhook-url_hu_9d663045e8fc2ddf.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/webhook-url.png"
    src="/posts/line-bot-2nd/webhook-url.png"
  />

  
</figure>
</p>
<p>這時要使用一個服務 ngrok (<a href="https://ngrok.com/" target="_blank">https://ngrok.com/</a>)。它能夠讓本地端的電腦，暫時有一個 HTTPS 的網址，至於細節怎麼做到就不說了，來看看怎麼用吧！</p>

<h4 class="relative group">註冊和下載 ngrok 
    <div id="註冊和下載-ngrok" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e8%a8%bb%e5%86%8a%e5%92%8c%e4%b8%8b%e8%bc%89-ngrok" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>到 ngrok 的官網，按下 Get started for free，然後註冊一個帳號。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="ngrok"
    srcset="
      /posts/line-bot-2nd/ngrok_hu_feb0db7150cc699d.png 330w,
      /posts/line-bot-2nd/ngrok_hu_528820a3f384e6a5.png 660w,
      /posts/line-bot-2nd/ngrok_hu_ee23bec716c6d445.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/ngrok.png"
    src="/posts/line-bot-2nd/ngrok.png"
  />

  
</figure>
</p>
<p>接著會到一個教你如何安裝的頁面，按照教學下載檔案、解壓縮檔案和連結帳號。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="ngrok-setup"
    srcset="
      /posts/line-bot-2nd/ngrok-setup_hu_cc6baa695e89b25.png 330w,
      /posts/line-bot-2nd/ngrok-setup_hu_6a4ca988fac75ee5.png 660w,
      /posts/line-bot-2nd/ngrok-setup_hu_23aa7953ec4b18ab.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/ngrok-setup.png"
    src="/posts/line-bot-2nd/ngrok-setup.png"
  />

  
</figure>
</p>

<h4 class="relative group">連結帳號 
    <div id="連結帳號" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e9%80%a3%e7%b5%90%e5%b8%b3%e8%99%9f" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>連結帳號這個步驟可能會有點難，步驟如下：</p>
<ol>
<li>
<p>先確定剛剛下載的檔案，解壓縮後放在哪裡，例如我放在 D:\ngrok-stable-windows-amd64\ngrok.exe。</p>
</li>
<li>
<p>開另外一個 cmd 進入到剛剛下載的 ngrok.exe 放的資料夾位置。</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> D:
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> <span class="nb">cd</span> ngrok-stable-windows-amd64
</span></span></code></pre></div><ol start="3">
<li>輸入連結帳號的指令。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> ngrok authtoken YOUR_TOKEN_ON_WEB
</span></span></code></pre></div><ol start="4">
<li>看到 &ldquo;Authtoken saved to configuration file&rdquo; 就代表成功了！</li>
</ol>

<h4 class="relative group">使用 ngrok 建立本地端 HTTPS 伺服器 
    <div id="使用-ngrok-建立本地端-https-伺服器" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%bd%bf%e7%94%a8-ngrok-%e5%bb%ba%e7%ab%8b%e6%9c%ac%e5%9c%b0%e7%ab%af-https-%e4%bc%ba%e6%9c%8d%e5%99%a8" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>我們要開始使用 ngrok 來建立本地端 HTTPS 伺服器囉！</p>
<p>首先我們要準備兩個 cmd 視窗，一個進到 LineBot 的資料夾，另一個進到 ngrok 的資料夾。</p>
<p>我們先用第一個 cmd 把 Node.js 執行起來，還記得嗎？指令 <code>npm start</code>。</p>
<p>再用另一個 cmd 執行 ngrok，把我們的 Node.js 伺服器變成 HTTPS 伺服器。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> ngrok http <span class="m">3000</span>
</span></span><span class="line"><span class="cl"><span class="go">// 因為我們 Node.js 的 port 預設是使用 3000，所以不像是 ngrok 教學中寫的 80
</span></span></span></code></pre></div><p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="ngrok-running"
    srcset="
      /posts/line-bot-2nd/ngrok-running_hu_509fc695c5f90eaf.png 330w,
      /posts/line-bot-2nd/ngrok-running_hu_16e8492001477db0.png 660w,
      /posts/line-bot-2nd/ngrok-running_hu_4bbfaa73e2f777c6.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/ngrok-running.png"
    src="/posts/line-bot-2nd/ngrok-running.png"
  />

  
</figure>
</p>
<p>這邊要注意一點，順序不能錯！一定要先執行 Node.js，再用 ngrok 改成 HTTPS 伺服器！</p>
<p>然後我們試試看 ngrok 給我們的網址，像我這次得到的是 <a href="https://5381cacc.ngrok.io" target="_blank">https://5381cacc.ngrok.io</a>。</p>
<p>丟到瀏覽器上執行，如果有看到 Express 就代表成功囉！</p>

<h4 class="relative group">跟 Line 串接在一起測試 
    <div id="跟-line-串接在一起測試" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e8%b7%9f-line-%e4%b8%b2%e6%8e%a5%e5%9c%a8%e4%b8%80%e8%b5%b7%e6%b8%ac%e8%a9%a6" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>我們回到 Line Developers 後台，把 Use webhooks 改成 Enabled，並在 Webhook URL 的地方填上網址，網址請輸入 &ldquo;ngrok 給的網址/webhook&rdquo;，例如筆者這次就要填入 &ldquo;5381cacc.ngrok.io/webhook&rdquo;。</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="enable-webhook-and-set-url"
    srcset="
      /posts/line-bot-2nd/enable-webhook-and-set-url_hu_8e51f7d254237f05.png 330w,
      /posts/line-bot-2nd/enable-webhook-and-set-url_hu_8832464251abe6ae.png 660w,
      /posts/line-bot-2nd/enable-webhook-and-set-url_hu_d4941351d59ab3b8.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/enable-webhook-and-set-url.png"
    src="/posts/line-bot-2nd/enable-webhook-and-set-url.png"
  />

  
</figure>
</p>
<p>為什麼後面要多加 /webhook 呢？因為我們的 app.js 裡面有寫到 <code>app.use('/webhook', webhookRouter);</code>，這樣 LineBot 才能順利的使用我們 webhook.js 裡面寫的邏輯。</p>
<p>填寫完 webhook 的網址後，記得要按右方的 Verify 去驗證，看到 Success 之後，LineBot 就會把它收到的訊息丟到伺服器裡面囉！</p>
<p>事不宜遲，來測試看看吧！用 Line 對你的 LineBot 說句話看看！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="test-1"
    srcset="
      /posts/line-bot-2nd/test-1_hu_74cefbd673e5abe4.png 330w,
      /posts/line-bot-2nd/test-1_hu_aa7efc4689d58a49.png 660w,
      /posts/line-bot-2nd/test-1_hu_ae1895d4943917c1.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/test-1.png"
    src="/posts/line-bot-2nd/test-1.png"
  />

  
</figure>
</p>
<p>LineBot 有正確執行囉！但是要怎麼去掉那個基本回覆呢？很簡單，到 Line 的後台把 Auto-reply messages 關掉就可以囉！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="disable-auto-reply"
    srcset="
      /posts/line-bot-2nd/disable-auto-reply_hu_6142e366637ce539.png 330w,
      /posts/line-bot-2nd/disable-auto-reply_hu_51e91c540f63664e.png 660w,
      /posts/line-bot-2nd/disable-auto-reply_hu_ce7ccaa78186df7b.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/disable-auto-reply.png"
    src="/posts/line-bot-2nd/disable-auto-reply.png"
  />

  
</figure>
</p>
<p>再測試一次看看吧！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="test-2"
    srcset="
      /posts/line-bot-2nd/test-2_hu_18d30d77b0ba101c.png 330w,
      /posts/line-bot-2nd/test-2_hu_78f0795a1e321c8e.png 660w,
      /posts/line-bot-2nd/test-2_hu_717a9b0fc9478897.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/test-2.png"
    src="/posts/line-bot-2nd/test-2.png"
  />

  
</figure>
</p>
<hr>

<h2 class="relative group">跟讓 Heroku 伺服器與 Line 串接在一起 
    <div id="跟讓-heroku-伺服器與-line-串接在一起" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e8%b7%9f%e8%ae%93-heroku-%e4%bc%ba%e6%9c%8d%e5%99%a8%e8%88%87-line-%e4%b8%b2%e6%8e%a5%e5%9c%a8%e4%b8%80%e8%b5%b7" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>終於到了這個階段了！我們目前有一台運作正常的 Heroku 伺服器，還有運作正常的程式碼。接下來就是再它們合體了。來吧！最後一步了！</p>

<h3 class="relative group">部屬程式到 Heroku 上面 
    <div id="部屬程式到-heroku-上面" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e9%83%a8%e5%b1%ac%e7%a8%8b%e5%bc%8f%e5%88%b0-heroku-%e4%b8%8a%e9%9d%a2" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>這邊的動作其實我們稍早已經做過一次了，不會太難！</p>
<p>打開一個新的 cmd，進入到 LineBot 的資料夾，輸入指令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> heroku login
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> git add .
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> git commit -am <span class="s2">&#34;line bot first submit&#34;</span>
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> git push heroku master
</span></span></code></pre></div><p>完成了之後，一樣可以點選 Open app 看看伺服器是否運作正常。</p>

<h3 class="relative group">修改 Line 後台 Webhook URL 
    <div id="修改-line-後台-webhook-url" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%bf%ae%e6%94%b9-line-%e5%be%8c%e5%8f%b0-webhook-url" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>接著我們到 Line Developers 的後台網頁，修改 Webhook URL，改成 Heroku 的網址。</p>
<p>Heroku 的網址怎麼看？很簡單，按下 Open app 之後，瀏覽器上的網址就是 Heroku 的網址了！</p>
<p>修改完 URL 之後，別忘記也要按 Verify 測試一下！</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="verify-webhook-url"
    srcset="
      /posts/line-bot-2nd/verify-webhook-url_hu_3e792d839e7cf685.png 330w,
      /posts/line-bot-2nd/verify-webhook-url_hu_da0fddc7ed796b98.png 660w,
      /posts/line-bot-2nd/verify-webhook-url_hu_e17272536fce447e.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/verify-webhook-url.png"
    src="/posts/line-bot-2nd/verify-webhook-url.png"
  />

  
</figure>
</p>
<p>最後用 Line 測試看看</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="test-3"
    srcset="
      /posts/line-bot-2nd/test-3_hu_211256d0cc17e032.png 330w,
      /posts/line-bot-2nd/test-3_hu_8c3554a782f86d22.png 660w,
      /posts/line-bot-2nd/test-3_hu_6cc6193bd3370637.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/test-3.png"
    src="/posts/line-bot-2nd/test-3.png"
  />

  
</figure>
</p>
<p>完成！現在 LineBot 已經和 Heroku 伺服器上的程式串接在一起了！</p>
<hr>

<h2 class="relative group">再次修改程式邏輯 
    <div id="再次修改程式邏輯" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e5%86%8d%e6%ac%a1%e4%bf%ae%e6%94%b9%e7%a8%8b%e5%bc%8f%e9%82%8f%e8%bc%af" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>我們再次修改一下程式的邏輯，改成判斷使用者輸入的文字，來決定回覆的訊息吧！</p>
<p>回到 webhook.js。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// linebot message event
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">bot</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">userInput</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">botReply</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">userInput</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;你&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">userInput</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;誰&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">botReply</span> <span class="o">=</span> <span class="s1">&#39;我是藍藍星星！&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">botReply</span> <span class="o">=</span> <span class="s1">&#39;你剛剛說了: &#39;</span> <span class="o">+</span> <span class="nx">userInput</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// reply to user
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">event</span><span class="p">.</span><span class="nx">reply</span><span class="p">(</span><span class="nx">botReply</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// if reply success
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Reply: &#39;</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// if something went wrong
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error: &#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>只要使用者的文字中，同時包含了 &ldquo;你&rdquo; 和 &ldquo;誰&rdquo;，LineBot 就會回覆 &ldquo;我是藍藍星星！&quot;。</p>
<p>我們部屬到 Heroku 上試試看吧！指令就不再說了哦～</p>
<p>





<figure>
      <img
    class="my-0 rounded-md" loading="lazy" decoding="async" fetchpriority="low" alt="test-4"
    srcset="
      /posts/line-bot-2nd/test-4_hu_13e2622dc12981d3.png 330w,
      /posts/line-bot-2nd/test-4_hu_be18e7f19fac66d0.png 660w,
      /posts/line-bot-2nd/test-4_hu_627fa6135b616414.png 1280w"
    data-zoom-src="/posts/line-bot-2nd/test-4.png"
    src="/posts/line-bot-2nd/test-4.png"
  />

  
</figure>
</p>
<hr>

<h2 class="relative group">一些小提醒 
    <div id="一些小提醒" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e4%b8%80%e4%ba%9b%e5%b0%8f%e6%8f%90%e9%86%92" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>當你部屬上 Heroku 之後，就不會在需要用到 ngrok 囉。不過它仍然是你本地端測試的利器，畢竟不可能天天沒 bug 嘛～ 出現 bug 的時候，你就會需要搭配 ngrok 來測試囉！記得用 ngrok 時，要去修改 Line 後台的 Webhook URL。</p>
<p>關於 LineBot 邏輯的部分，可以參考 linebot 這個 module。它還有除了 message 的 event 可以串接，可以好好拜讀一下文件，寫出更酷的 LineBot 邏輯！</p>
<p>URL: <a href="https://www.npmjs.com/package/linebot" target="_blank">https://www.npmjs.com/package/linebot</a></p>
<hr>

<h2 class="relative group">結語 
    <div id="結語" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%e7%b5%90%e8%aa%9e" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>這篇文章寫了很多設定相關的教學，反而程式邏輯的部分都沒寫到多少。不過我認為最難、最容易卡住的就是設定了。我想設定都完成的話，接下來邏輯就是改改程式就好囉！而且程式正是我們該發揮創意的地方呀！</p>
<p>如果過程中遇到什麼地方卡住了，歡迎留言一起討論哦！</p>

          
          
          
        </div>
        
        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_posts\\line-bot-2nd\\index.md"
        var oid_likes = "likes_posts\\line-bot-2nd\\index.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/posts/line-bot-1st/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >架設一個 LineBot 聊天機器人 (上篇)</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2018-05-23T18:12:11&#43;08:00">2018 May 23</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/posts/set-up-hugo-blog/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >用 Hugo 搭建個人網站</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-06-17T21:45:56&#43;08:00">2025 June 17</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="Tags">
            
            Tags
          </a>
        </li>
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/categories/"
            title="Categories">
            
            Categories
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2025
      Ian Chiu
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://ianchiu28.github.io/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
